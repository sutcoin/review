<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SUT í›„ê¸° ì œì¶œ</title>

<style>
body { font-family: sans-serif; background:#f3f7fb; padding: 30px; }
.card { background:#fff; padding:20px; border-radius:12px; max-width:800px; margin:auto; }
input, textarea { width:100%; padding:10px; border-radius:8px; border:1px solid #ddd; margin-top:6px; }
button { padding:12px; border-radius:8px; border:0; cursor:pointer; background:#0066ff; color:#fff; width:100%; margin-top:15px; }

#overlay { position:fixed; inset:0; background:rgba(0,0,0,0.45); display:none;
           align-items:center; justify-content:center; color:#fff; font-size:20px; }
</style>
</head>
<body>

<div id="overlay">ì „ì†¡ì¤‘ì…ë‹ˆë‹¤...</div>

<div class="card">
  <h2>SUT ì‚¬ìš© í›„ê¸° ì œì¶œ</h2>

  <label>ë‹‰ë„¤ì„</label>
  <input id="nickname">

  <label>ì½”ë“œ</label>
  <input id="code">

  <label>ì†Œì†</label>
  <input id="affiliation">

  <label>ì´ìš©í•œ ì—…ì²´ *</label>
  <input id="usedStore">

  <label>ì—…ì²´ ë§í¬</label>
  <input id="storeLink">

  <label>í›„ê¸° (200ì)</label>
  <textarea id="description" maxlength="200"></textarea>

  <label>ì´ë¯¸ì§€ ì²¨ë¶€ (ìµœëŒ€ 10ì¥)</label>
  <input type="file" id="files" multiple accept="image/*">

  <button onclick="submitForm()">ì œì¶œí•˜ê¸°</button>
  <p id="result"></p>
</div>


<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxoNKsOfOd_aRg7vmpzySrTSydB9nk6lBD_6M6GysQTvECJ7wKabcuPJsJmWPRRJc9oRA/exec";

async function submitForm() {
  document.getElementById("overlay").style.display = "flex";
  const result = document.getElementById("result");

  try {
    const form = new FormData();
    form.append("nickname", nickname.value);
    form.append("code", code.value);
    form.append("affiliation", affiliation.value);
    form.append("usedStore", usedStore.value);
    form.append("storeLink", storeLink.value);
    form.append("description", description.value);

    [...files.files].forEach(file => form.append("photos", file));

    const res = await fetch(SCRIPT_URL, {
      method: "POST",
      body: form,
    });

    const json = await res.json();
    result.innerHTML = `âœ… ì œì¶œ ì™„ë£Œ!<br>ğŸ“ í´ë”: <a href="${json.folderUrl}" target="_blank">ì—´ê¸°</a>`;
    document.getElementById("overlay").style.display = "none";
  }
  catch(err) {
    result.innerHTML = `âŒ ì „ì†¡ ì‹¤íŒ¨: ${err}`;
    document.getElementById("overlay").style.display = "none";
  }
}
</script>

</body>
</html>
